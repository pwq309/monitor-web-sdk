var _MusicCorona=function(){"use strict";var l={collectWindowErrors:!0,debug:!1},m="?";function y(){return"undefined"==typeof document||null==document.location?"":document.location.href}function n(t){if(void 0!==t.stack&&t.stack){for(var e,r,n,o=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|[a-z]:|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,a=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx(?:-web)|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,i=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|moz-extension).*?:\/.*?|\[native code\]|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,s=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,c=/\((\S*)(?::(\d+))(?::(\d+))\)/,u=t.stack.split("\n"),l=[],p=(/^(.*) is undefined$/.exec(t.message),0),h=u.length;p<h;++p){if(r=o.exec(u[p])){var f=r[2]&&0===r[2].indexOf("native");r[2]&&0===r[2].indexOf("eval")&&(e=c.exec(r[2]))&&(r[2]=e[1],r[3]=e[2],r[4]=e[3]),n={url:f?null:r[2],func:r[1]||m,args:f?[r[2]]:[],line:r[3]?+r[3]:null,column:r[4]?+r[4]:null}}else if(r=a.exec(u[p]))n={url:r[2],func:r[1]||m,args:[],line:+r[3],column:r[4]?+r[4]:null};else{if(!(r=i.exec(u[p])))continue;r[3]&&-1<r[3].indexOf(" > eval")&&(e=s.exec(r[3]))?(r[3]=e[1],r[4]=e[2],r[5]=null):0!==p||r[5]||void 0===t.columnNumber||(l[0].column=t.columnNumber+1),n={url:r[3],func:r[1]||m,args:r[2]?r[2].split(","):[],line:r[4]?+r[4]:null,column:r[5]?+r[5]:null}}if(!n.func&&n.line&&(n.func=m),n.url&&"blob:"===n.url.substr(0,5)){var d=new XMLHttpRequest;if(d.open("GET",n.url,!1),d.send(null),200===d.status){var _=d.responseText||"",g=(_=_.slice(-300)).match(/\/\/# sourceMappingURL=(.*)$/);if(g){var v=g[1];"~"===v.charAt(0)&&(v=("undefined"==typeof document||null==document.location?"":document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""))+v.slice(1)),n.url=v.slice(0,-4)}}}l.push(n)}return l.length?{name:t.name,message:t.message,url:y(),stack:l}:null}}function p(t,e,r,n){var o={url:e,line:r};if(o.url&&o.line){if(t.incomplete=!1,o.func||(o.func=m),0<t.stack.length&&t.stack[0].url===o.url){if(t.stack[0].line===o.line)return!1;if(!t.stack[0].line&&t.stack[0].func===o.func)return t.stack[0].line=o.line,!1}return t.stack.unshift(o),t.partial=!0}return!(t.incomplete=!0)}function h(t,e){for(var r,n,o=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,a=[],i={},s=!1,c=h.caller;c&&!s;c=c.caller)if(c!==f&&c!==l.report){if(n={url:null,func:m,line:null,column:null},c.name?n.func=c.name:(r=o.exec(c.toString()))&&(n.func=r[1]),void 0===n.func)try{n.func=r.input.substring(0,r.input.indexOf("{"))}catch(t){}i[""+c]?s=!0:i[""+c]=!0,a.push(n)}e&&a.splice(0,e);var u={name:t.name,message:t.message,url:y(),stack:a};return p(u,t.sourceURL||t.fileName,t.line||t.lineNumber,t.message||t.description),u}function f(t,e){var r=null;e=null==e?0:+e;try{if(r=n(t))return r}catch(t){}try{if(r=h(t,e+1))return r}catch(t){}return{name:t.name,message:t.message,url:y()}}function s(t,e){for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}function c(t,e,r,n){return JSON.stringify(t,function(n,o){var a=[],i=[];null==o&&(o=function(t,e){return a[0]===e?"[Circular ~]":"[Circular ~."+i.slice(0,s(a,e)).join(".")+"]"});return function(t,e){if(0<a.length){var r=s(a,this);~r?a.splice(r+1):a.push(this),~r?i.splice(r,1/0,t):i.push(t),~s(a,e)&&(e=o.call(this,t,e))}else a.push(e);return null==n?e instanceof Error?function(t){var e={stack:t.stack,message:t.message,name:t.name};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}(e):e:n.call(this,t,e)}}(e,n),r)}l.computeStackTrace=(f.augmentStackTraceWithInitialElement=p,f.computeStackTraceFromStackProp=n,f);function e(){try{return new ErrorEvent(""),!0}catch(t){return!1}}function o(t){return void 0===t}function u(t){return"[object String]"===Object.prototype.toString.call(t)}function a(t){return"[object Array]"===Object.prototype.toString.call(t)}function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function d(t,e){var r=void 0,n=void 0;if(o(t.length))for(r in t)i(t,r)&&e(r,t[r]);else if(n=t.length)for(r=0;r<n;r++)e(r,t[r])}function _(t){var e=[],r=void 0,n=void 0,o=void 0,a=void 0,i=void 0;if(!t||!t.tagName)return"";if(e.push(t.tagName.toLowerCase()),t.id&&e.push("#"+t.id),(r=t.className)&&u(r))for(n=r.split(/\s+/),i=0;i<n.length;i++)e.push("."+n[i]);var s=["type","name","title","alt"];for(i=0;i<s.length;i++)o=s[i],(a=t.getAttribute(o))&&e.push("["+o+'="'+a+'"]');return e.join("")}var t=function(r,t){return t&&d(t,function(t,e){r[t]=e}),r},g=function(t,e){if(!a(t))return"";for(var r=[],n=0;n<t.length;n++)try{r.push(String(t[n]))}catch(t){r.push("[value cannot be serialized]")}return r.join(e)};function r(){return+new Date}var v=function(t){switch({}.toString.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return t instanceof Error}},w=function(t){return e()&&"[object ErrorEvent]"==={}.toString.call(t)},b=o,E=function(t){return"function"==typeof t},S=u,x=d,C=t,O=i,k=function(t){for(var e=[],r=0,n=t.length,o=void 0;r<n;r++)o=t[r],u(o)?e.push(o.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):o&&o.source&&e.push(o.source);return new RegExp(e.join("|"),"i")},T=function(t){for(var e=[],r=0,n=0,o=" > ".length,a=void 0;t&&r++<5&&!("html"===(a=_(t))||1<r&&80<=n+e.length*o+a.length);)e.push(a),n+=a.length,t=t.parentNode;return e.reverse().join(" > ")},j=function(t){if("string"!=typeof t)return{};var e=t.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/),r=e[6]||"",n=e[8]||"";return{protocol:e[2],host:e[4],path:e[5],relative:e[5]+r+n}},R=function(t,e,r,n){var o=t[e];t[e]=r(o),t[e].__skynet__=!0,t[e].__orig__=o,n&&n.push([t,e,o])},D=function(){if(!("fetch"in window))return!1;try{return new Headers,new Request(""),new Response,!0}catch(t){return!1}},M=window.document,q=window.navigator,B=(H.prototype.config=function(t,e,r){var n=this;if(n._globalServer)return n;if(!t)return n;var o=n._globalOptions;r&&x(r,function(t,e){o[t]=e}),n.setCustomInfo(t,e),o.ignoreErrors=k(o.ignoreErrors),o.maxBreadcrumbs=Math.max(0,Math.min(o.maxBreadcrumbs||100,100));var a={xhr:!0,console:!0,dom:!0,location:!0,corona:!1},i=o.autoBreadcrumbs;"dev"===e?i=!1:"[object Object]"==={}.toString.call(i)?i=C(a,i):!1!==i&&(i=a),o.autoBreadcrumbs=i;var s={tryCatch:!0},c=o.instrument;return"[object Object]"==={}.toString.call(c)?c=C(s,c):!1!==c&&(c=s),o.instrument=c,n},H.prototype.install=function(){var t=this;return t.isSetup()&&!t._isCoronaInstalled&&(t._patchFunctionToString(),t._globalOptions.instrument&&t._globalOptions.instrument.tryCatch&&t._instrumentTryCatch(),t._globalOptions.autoBreadcrumbs&&t._instrumentBreadcrumbs(),t._isCoronaInstalled=!0),this},H.prototype.setCustomInfo=function(t,e){this._tag.project=t,this._tag.env=e,this._globalKey="api/feedback/weblog/sys",this._globalServer="//clientlog.music.174.com/api/feedback/weblog/sys"},H.prototype.wrap=function(i,s,c){var u=this;if(b(s)&&!E(i))return i;if(E(i)&&(s=i,i=void 0),!E(s))return s;try{if(s.__corona__)return s;if(s.__corona_wrapper__)return s.__corona_wrapper__}catch(t){return s}function t(){for(var t=[],e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];var o=r.length,a=!i||i&&!1!==i.deep;for(c&&E(c)&&c.apply(this,r);o--;)t[o]=a?u.wrap(i,r[o]):r[o];try{return s.apply(this,t)}catch(t){throw u._ignoreNextOnError(),u.captureException(t,i),t.type="__corona_wrapper__",t}}for(var e in s)O(s,e)&&(t[e]=s[e]);return t.prototype=s.prototype,(s.__corona_wrapper__=t).__corona__=!0,t.__orig__=s,t},H.prototype.captureException=function(t,e,r){e=C({},e||{});var n=!v(t),o=!w(t),a=w(t)&&!t.error;if(n&&o||a)return this.captureMessage(t,C(e,{stacktrace:!0}),r);w(t)&&(t=t.error);var i=l.computeStackTrace(t);return e.tags&&(i.data=e.tags),this._baseData.json.content=c(i),this._baseData.json.level="error",this._tag.active=!!e.active,this._handleStackInfo(t),this},H.prototype.captureMessage=function(t,e,r){if(this._globalOptions.ignoreErrors.test&&this._globalOptions.ignoreErrors.test(t))return null;var n={message:t};return(e=e||{}).tags&&(n.data=e.tags),r&&(n.name=r),this._baseData.json.content=c(n),this._baseData.json.level=e.level||"error",this._tag.active=!!e.active,this._send(),this},H.prototype.captureBreadcrumb=function(t){var e=C({timestamp:r()/1e3},t);return this._breadcrumbs.push(e),this._breadcrumbs.length>this._globalOptions.maxBreadcrumbs&&this._breadcrumbs.shift(),this},H.prototype.isSetup=function(){return!!this._globalServer||(this.coronaNotConfiguredError||(this.coronaNotConfiguredError=!0),!1)},H.prototype._ignoreNextOnError=function(){var t=this;this._ignoreOnError+=1,setTimeout(function(){--t._ignoreOnError})},H.prototype._breadcrumbEventHandler=function(r){var n=this;return function(t){if(n._lastCapturedEvent!==t){n._lastCapturedEvent=t;var e=void 0;try{e=T(t.target)}catch(t){e="<unknown>"}n.captureBreadcrumb({category:"ui."+r,message:e})}}},H.prototype._captureUrlChange=function(t,e){var r=j(this._location.href),n=j(e),o=j(t);this._lastHref=e,r.protocol===n.protocol&&r.host===n.host&&(e=n.relative),r.protocol===o.protocol&&r.host===o.host&&(t=o.relative),this.captureBreadcrumb({category:"navigation",data:{to:e,from:t}})},H.prototype._patchFunctionToString=function(){var n=this;n._originalFunctionToString=Function.prototype.toString,Function.prototype.toString=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return"function"==typeof this&&this.__corona__?n._originalFunctionToString.apply(this.__orig__,e):n._originalFunctionToString.apply(this,e)}},H.prototype._instrumentTryCatch=function(){var c=this,e=c._wrappedBuiltIns;function t(a){return function(t,e){for(var r=new Array(arguments.length),n=0;n<r.length;++n)r[n]=arguments[n];var o=r[0];return E(o)&&(r[0]=c.wrap(o)),a.apply(this,r)}}var u=this._globalOptions.autoBreadcrumbs;function r(s){var t=window[s]&&window[s].prototype;t&&t.hasOwnProperty&&t.hasOwnProperty("addEventListener")&&(R(t,"addEventListener",function(i){return function(t,e,r,n){try{e&&e.handleEvent&&(e.handleEvent=c.wrap(e.handleEvent))}catch(t){}var o=void 0,a=void 0;return u&&u.dom&&("EventTarget"===s||"Node"===s)&&(a=c._breadcrumbEventHandler("click"),o=function(t){if(!t)return null;var e=void 0;try{e=t.type}catch(t){return null}return"click"===e?a(t):null}),i.call(this,t,c.wrap(e,void 0,o),r,n)}},e),R(t,"removeEventListener",function(o){return function(t,e,r,n){try{e=e&&(e.__corona_wrapper__?e.__corona_wrapper__:e)}catch(t){}return o.call(this,t,e,r,n)}},e))}R(window,"setTimeout",t,e),R(window,"setInterval",t,e),window.requestAnimationFrame&&R(window,"requestAnimationFrame",function(e){return function(t){return e(c.wrap(t))}},e);for(var n=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],o=0;o<n.length;o++)r(n[o])},H.prototype._instrumentBreadcrumbs=function(){var s=this,t=this._globalOptions.autoBreadcrumbs,e=s._wrappedBuiltIns;if(t.xhr&&"XMLHttpRequest"in window){var r=XMLHttpRequest.prototype;R(r,"open",function(r){return function(t,e){return S(e)&&-1===e.indexOf(s._globalKey)&&(this.__corona_xhr={method:t,url:e,status_code:null}),r.apply(this,arguments)}},e),R(r,"send",function(i){return function(){var t=this;function e(){if(t.__corona_xhr&&4===t.readyState){try{t.__corona_xhr.status_code=t.status}catch(t){}s.captureBreadcrumb({type:"http",category:"xhr",data:t.__corona_xhr})}}for(var r,n,o=["onload","onerror","onprogress"],a=0;a<o.length;a++)(r=o[a])in(n=t)&&E(n[r])&&R(n,r,function(t){return s.wrap(t)});return"onreadystatechange"in t&&E(t.onreadystatechange)?R(t,"onreadystatechange",function(t){return s.wrap(t,void 0,e)}):t.onreadystatechange=e,i.apply(this,arguments)}},e)}t.xhr&&D()&&R(window,"fetch",function(i){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];var r=t[0],n="GET",o=void 0;if("string"==typeof r?o=r:"Request"in window&&r instanceof window.Request?(o=r.url,r.method&&(n=r.method)):o=""+r,-1!==o.indexOf(s._globalKey))return i.apply(this,t);t[1]&&t[1].method&&(n=t[1].method);var a={method:n,url:o,status_code:null};return i.apply(this,t).then(function(t){return a.status_code=t.status,s.captureBreadcrumb({type:"http",category:"fetch",data:a}),t})}},e),t.dom&&this._hasDocument&&M.addEventListener("click",s._breadcrumbEventHandler("click"),!1);var n=window.chrome,o=!(n&&n.app&&n.app.runtime)&&window.history&&window.history.pushState&&window.history.replaceState;if(t.location&&o){var a=window.onpopstate;window.onpopstate=function(){var t=s._location.href;if(s._captureUrlChange(s._lastHref,t),a){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return a.apply(this,r)}return null};var i=function(e){return function(){var t=2<arguments.length?arguments[2]:void 0;return t&&s._captureUrlChange(s._lastHref,""+t),e.apply(this,arguments)}};R(window.history,"pushState",i,e),R(window.history,"replaceState",i,e)}if(t.console&&"console"in window&&console.log){var c=function(t,e){s.captureBreadcrumb({message:t,level:e.level,category:"console"})};x(["info","warn","error"],function(t,e){!function(t,a,i){var s=t[a],c=t;if(a in t){var u="warn"===a?"warning":a;t[a]=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=g(e," "),o={level:u,logger:"console",extra:{arguments:e}};"assert"===a?!1===e[0]&&(n="Assertion failed:  "+(g(e.slice(1)," ")||"console.assert"),o.extra.arguments=e.slice(1),i&&i(n,o)):i&&i(n,o),s&&Function.prototype.apply.call(s,c,e)}}}(console,e,c)})}},H.prototype._handleOnErrorStackInfo=function(){if(!this._ignoreOnError){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];this._handleStackInfo(e)}},H.prototype._handleStackInfo=function(t){this._processException(t.name,t.message)},H.prototype._processException=function(t,e){var r=(t?t+": ":"")+(e||"");this._globalOptions.ignoreErrors.test&&(this._globalOptions.ignoreErrors.test(e)||this._globalOptions.ignoreErrors.test(r))||this._send()},H.prototype._getHttpData=function(){if(!this._hasNavigator&&!this._hasDocument)return null;var t={};return this._hasNavigator&&q.userAgent&&(t={ua:navigator.userAgent}),window.location&&window.location.href&&(t.url=window.location.href),this._hasDocument&&M.referrer&&(t.referer=M.referrer),t},H.prototype._isRepeatData=function(t){var e=t.json.content,r=this._lastData,n=c(e);return n===r||(this._lastData=n,!1)},H.prototype._send=function(){var t,e=this._globalOptions,r=this._getHttpData();r&&(this._tag=C(this._tag,r)),this._breadcrumbs&&0<this._breadcrumbs.length&&(this._tag.breadcrumbs=[].slice.call(this._breadcrumbs,0)),this._baseData.json.event=this._tag,this._baseData.action="corona_web",t=C({},this._baseData),("number"!=typeof e.sampleRate||Math.random()<e.sampleRate)&&this._sendProcessedPayload(t)},H.prototype._sendProcessedPayload=function(t){var e=this._globalOptions;if(this.isSetup()&&!this._isRepeatData(t)){var r=this._globalServer;this._makeRequest({url:r,data:[t],options:e})}},H.prototype._makeRequest=function(r){var t=r.url,e={};if(r.options.fetchParameters&&(e=this._evaluateHash(r.options.fetchParameters)),D()){e.body="logs="+c(r.data);var n=C({},this._fetchDefaults),o=C(n,e);return window.fetch(t,o).then(function(t){if(t.ok)r.onSuccess&&r.onSuccess();else{var e=new Error("Corona error code: "+t.status);e.request=t,r.onError&&r.onError(e)}}).catch(function(){r.onError&&r.onError(new Error("Corona error code: network unavailable"))})}var a=window.XMLHttpRequest&&new window.XMLHttpRequest;return a&&("withCredentials"in a?(a.onreadystatechange=function(){if(4!==a.readyState)return null;if(200===a.status)r.onSuccess&&r.onSuccess();else if(r.onError){var t=new Error("Corona error code: "+a.status);t.request=a,r.onError(t)}return null},a.withCredentials=!0):(a=new window.XDomainRequest,t=t.replace(/^https?:/,""),r.onSuccess&&(a.onload=r.onSuccess),r.onError&&(a.onerror=function(){var t=new Error("Corona error code: XDomainRequest");t.request=a,r.onError(t)})),a.open("POST",t),a.setRequestHeader("Content-Type",this._requestContentType),a.send("logs="+c(r.data))),null},H.prototype._evaluateHash=function(t){var e={};for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];e[r]="function"==typeof n?n():n}return e},H);function H(){for(var t in!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,H),this._hasDocument=!b(M),this._hasNavigator=!b(q),this._lastData=null,this._globalServer=null,this._globalKey=null,this._globalOptions={from:"web",ignoreErrors:[],autoBreadcrumbs:!0,maxBreadcrumbs:10,instrument:!0,sampleRate:1},this._requestContentType="application/x-www-form-urlencoded",this._fetchDefaults={method:"POST",keepalive:!0,referrerPolicy:"origin",headers:{"Content-Type":this._requestContentType},credentials:"include"},this._ignoreOnError=0,this._isCoronaInstalled=!1,this._originalConsole=window.console||{},this._originalConsoleMethods={},this._startTime=r(),this._wrappedBuiltIns=[],this._breadcrumbs=[],this._lastCapturedEvent=null,this._location=window.location,this._lastHref=this._location&&this._location.href,this._tag={from:"web",env:"",SDKversion:"1.1.0",project:0,url:"",referer:"",ua:"",breadcrumbs:[]},this._baseData={json:{ts:r(),event:"",content:"",level:"error"}},this._originalConsole)this._originalConsoleMethods[t]=this._originalConsole[t]}function L(t){return"[object Object]"===Object.prototype.toString.call(t)}function N(t){if(e=t,"[object XMLHttpRequest]"!==Object.prototype.toString.call(e))return t;var e,r={};return $(r,t),r.readyState=t.readyState,r.responseText=t.responseText,r.responseType=t.responseType,r.responseURL=t.responseURL,r.status=t.status,r.statusText=t.statusText,r.timeout=t.timeout,r}function A(t,e){var r=void 0,n={level:"info",tags:"",active:!0};"string"==typeof t?r=t:t instanceof Error?r=t.message:(r="Corona入参Error：信息只可以传字符串",t=N(t),L(t)&&(e=L(e)?$(e,t):t)),n.tags=e||"",U.captureMessage(r,n)}function F(t,e){var r=void 0,n={level:"warn",tags:"",active:!0};"string"==typeof t?r=t:t instanceof Error?r=t.message:(r="Corona入参Error：警告只可以传字符串",t=N(t),L(t)&&(e=L(e)?$(e,t):t)),n.tags=e||"",U.captureMessage(r,n)}function I(t,e,r,n){var o=void 0,a={level:"error",tags:"",active:!!r},i={};if("string"==typeof t)o=t;else if(t instanceof Error){for(var s in t)t.hasOwnProperty(s)&&(i[s]=t[s]);o=t}else o="Corona入参Error：错误只可以传字符串或者错误对象",t=N(t),L(t)&&(e=L(e)?$(e,t):t);"{}"!==JSON.stringify(i)&&(e=L(e)?Object.assign({},i,e):i),a.tags=e||"",U.captureException(o,a,n)}function P(t,e){return U.config(t,e,X).install(),window.addEventListener("unhandledrejection",function(t){L(t.reason)?I("未处理的 unhandlerejection 事件",t.reason,!1):I(t.reason,"",!1,"unhandledrejection")}),window.onerror=function(t,e,r,n,o){e&&"__corona_wrapper__"!==o.type&&I(o,"",!1)},{info:A,warn:F,error:I}}var X={ignoreErrors:["diableNightMode is not defined","Can't find variable: IsClickShowFun","Cannot redefine property: BCMain"],sampleRate:1},$=t,U=new B;return window.MusicCorona=P}();
